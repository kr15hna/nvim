*nvim-http.txt*

nvim-http: run .http requests in Neovim with history and script chaining

COMMANDS
  :HttpRun      Run requests up to current request under cursor.
  :HttpRunAll   Run all requests in the current buffer.
  :HttpHistory  Open history directory.
  :HttpPickDesiredAccount  Pick desired account from vars list.

CONFIG
  history_dir       History folder under current working directory.
  vars_file         Project vars file to load each run. Default: .nvim-http.vars.lua
  globals           Global vars table from setup().
  oauth_cache_file  OAuth token cache file in cwd. Default: .nvim-http.oauth-cache.json

GLOBAL VARS
  Add `desired_accounts = { ... }` to vars file for account picker.
  Picker sets session override for desired_account.

  Vars are merged in order:
    1) setup().globals
    2) current-working-directory vars_file
  vars_file must be a Lua file returning a table.

OAUTH CACHE
  If vars.oauth exists (token_url, username, password), plugin auto-fetches tokens
  and sets vars.access_token + vars.id_token.
  Tokens are cached in oauth_cache_file and refreshed only when expired/near expiry.

  OAuth vars example:
    oauth = {
      token_url = "{{base}}/auth/oauth2/token",
      grant_type = "password",
      username = "user",
      password = "pass",
      refresh_skew_seconds = 60,
    }

FORMAT
  - Use `### name` to mark request/script sections.
  - Request section starts with `METHOD URL`.
  - Optional query params can be on separate lines starting with `?` or `&`.
  - Lines starting with `#` or `//` are treated as comments in request parsing.
  - Headers follow, then blank line, then body.
  - Script section starts with `@script lua` and runs Lua code.

VARIABLES
  Interpolate values using `{{key}}` from shared `vars` table.
  Dotted keys are supported (`{{auth.token}}`).

SCRIPT CONTEXT
  vars   shared variables table.
  ctx    context with `ctx.vars` and `ctx.last`.
  last   alias of `ctx.last`.
  vim    Neovim API.

HISTORY
  Responses are saved at:
    <cwd>/.nvim-http-history/<timestamp>-<unique>-<section>.http.response
